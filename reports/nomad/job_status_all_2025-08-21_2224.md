# Nomad Job Status Report

Generated: 2025-08-22T02:24:58Z
Nomad Endpoint: <http://192.168.11.11:4646>
Namespace: default

## All Jobs Summary

Total Jobs: 3

| Job Name | Status | Type | Running | Failed | Pending | Priority |
|----------|---------|------|---------|--------|---------|----------|
| postgresql | running | service | 0 | 0 | 0 | 50 |
| powerdns-auth | running | service | 0 | 0 | 0 | 50 |
| traefik | running | service | 0 | 0 | 0 | 50 |

### Raw Job Data

```yaml
-   Affinities: null
    AllAtOnce: false
    Constraints: null
    ConsulNamespace: ''
    CreateIndex: 171548
    Datacenters:
    - dc1
    DispatchIdempotencyToken: ''
    Dispatched: false
    ID: postgresql
    JobModifyIndex: 171784
    Meta: null
    ModifyIndex: 171794
    Multiregion: null
    Name: postgresql
    Namespace: default
    NodePool: default
    NomadTokenID: ''
    ParameterizedJob: null
    ParentID: ''
    Payload: null
    Periodic: null
    Priority: 50
    Region: global
    Spreads: null
    Stable: true
    Status: running
    StatusDescription: ''
    Stop: false
    SubmitTime: 1754801316799720604
    TaskGroups:
    -   Affinities: null
        Constraints:
        -   LTarget: ${attr.os.signals}
            Operand: set_contains
            RTarget: SIGHUP
        -   LTarget: ${attr.nomad.version}
            Operand: semver
            RTarget: '>= 1.7.0-a'
        Consul: null
        Count: 1
        Disconnect: null
        EphemeralDisk:
            Migrate: false
            SizeMB: 300
            Sticky: false
        MaxClientDisconnect: null
        Meta: null
        Migrate:
            HealthCheck: checks
            HealthyDeadline: 300000000000
            MaxParallel: 1
            MinHealthyTime: 10000000000
        Name: pg
        Networks:
        -   DynamicPorts:
            -   HostNetwork: default
                Label: db
            Mode: host
        PreventRescheduleOnLost: false
        ReschedulePolicy:
            Attempts: 0
            Delay: 30000000000
            DelayFunction: exponential
            Interval: 0
            MaxDelay: 3600000000000
            Unlimited: true
        RestartPolicy:
            Attempts: 3
            Delay: 10000000000
            Interval: 30000000000
            Mode: fail
            RenderTemplates: false
        Scaling: null
        Services: null
        ShutdownDelay: null
        Spreads: null
        StopAfterClientDisconnect: null
        Tasks:
        -   Actions: null
            Affinities: null
            Artifacts: null
            CSIPluginConfig: null
            Config:
                args:
                - -c
                - config_file=/local/postgresql.conf
                image: postgres:16-alpine
                network_mode: host
                ports:
                - db
            Constraints:
            -   LTarget: ${attr.consul.version}
                Operand: semver
                RTarget: '>= 1.8.0'
            Consul: null
            DispatchPayload: null
            Driver: docker
            Env:
                PGDATA: /var/lib/postgresql/data/pgdata
                PGHOST_ADDR: 0.0.0.0
                POSTGRES_PASSWORD: temporary-bootstrap-password
                POSTGRES_USER: postgres
            Identities: null
            Identity:
                Audience:
                - nomadproject.io
                ChangeMode: ''
                ChangeSignal: ''
                Env: false
                File: false
                Filepath: ''
                Name: default
                ServiceName: ''
                TTL: 0
            KillSignal: ''
            KillTimeout: 5000000000
            Kind: ''
            Leader: false
            Lifecycle: null
            LogConfig:
                Disabled: false
                MaxFileSizeMB: 10
                MaxFiles: 10
            Meta: null
            Name: postgres
            Resources:
                CPU: 500
                Cores: 0
                Devices: null
                DiskMB: 0
                IOPS: 0
                MemoryMB: 2048
                MemoryMaxMB: 0
                NUMA: null
                Networks: null
                SecretsMB: 0
            RestartPolicy:
                Attempts: 3
                Delay: 10000000000
                Interval: 30000000000
                Mode: fail
                RenderTemplates: false
            ScalingPolicies: null
            Schedule: null
            Services:
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 10000000000
                    Method: ''
                    Name: tcp
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: ''
                    PortLabel: ''
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: postgres
                    Timeout: 2000000000
                    Type: tcp
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_postgres-postgres-db
                    ServiceName: postgres
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: postgres
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: db
                Provider: consul
                TaggedAddresses: null
                Tags:
                - tcp
                - db
                - postgres16
                TaskName: postgres
                Weights: null
            ShutdownDelay: 0
            Templates:
            -   ChangeMode: signal
                ChangeScript: null
                ChangeSignal: SIGHUP
                DestPath: local/postgresql.conf
                EmbeddedTmpl: "listen_addresses = '{{ env \"PGHOST_ADDR\" }}'\nport
                    = {{ env \"NOMAD_PORT_db\" }}\n\n# sensible starters\nshared_buffers
                    = '1GB'\nwork_mem       = '16MB'\nmaintenance_work_mem = '256MB'\nmax_connections
                    = 200\n\n# WAL & durability\nwal_level = replica\nsynchronous_commit
                    = on\nmax_wal_size = '2GB'\nmin_wal_size = '80MB'\narchive_mode
                    = off\n          \n# Socket configuration (avoid permission issues)\nunix_socket_directories
                    = '/tmp'\n"
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            -   ChangeMode: signal
                ChangeScript: null
                ChangeSignal: SIGHUP
                DestPath: local/pg_hba.conf
                EmbeddedTmpl: 'local   all             all                                     trust

                    host    all             all             127.0.0.1/32            md5

                    host    all             all             ::1/128                 md5

                    # Allow from your cluster subnets (tighten as needed)

                    host    all             all             192.168.10.0/24         md5

                    host    all             all             192.168.11.0/24         md5

                    host    all             all             192.168.30.0/24         md5

                    '
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            User: 999:999
            Vault: null
            VolumeMounts:
            -   Destination: /var/lib/postgresql/data
                PropagationMode: private
                ReadOnly: false
                SELinuxLabel: ''
                Volume: postgres-data
        -   Actions: null
            Affinities: null
            Artifacts: null
            CSIPluginConfig: null
            Config:
                args:
                - /local/create-db.sh
                command: sh
                image: postgres:16-alpine
                network_mode: host
            Constraints: null
            Consul: null
            DispatchPayload: null
            Driver: docker
            Env:
                PGPASSWORD: temporary-bootstrap-password
            Identities: null
            Identity:
                Audience:
                - nomadproject.io
                ChangeMode: ''
                ChangeSignal: ''
                Env: false
                File: false
                Filepath: ''
                Name: default
                ServiceName: ''
                TTL: 0
            KillSignal: ''
            KillTimeout: 5000000000
            Kind: ''
            Leader: false
            Lifecycle:
                Hook: poststart
                Sidecar: false
            LogConfig:
                Disabled: false
                MaxFileSizeMB: 10
                MaxFiles: 10
            Meta: null
            Name: init-pdns
            Resources:
                CPU: 50
                Cores: 0
                Devices: null
                DiskMB: 0
                IOPS: 0
                MemoryMB: 128
                MemoryMaxMB: 0
                NUMA: null
                Networks: null
                SecretsMB: 0
            RestartPolicy:
                Attempts: 3
                Delay: 10000000000
                Interval: 30000000000
                Mode: fail
                RenderTemplates: false
            ScalingPolicies: null
            Schedule: null
            Services: null
            ShutdownDelay: 0
            Templates:
            -   ChangeMode: restart
                ChangeScript: null
                ChangeSignal: ''
                DestPath: local/init.sql
                EmbeddedTmpl: "-- Create PowerDNS user if it doesn't exist\nDO\n$do$\nBEGIN\n
                    \ IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'pdns')
                    THEN\n     CREATE USER pdns WITH PASSWORD 'temporary-pdns-password';\n
                    \ END IF;\nEND\n$do$;\n          \n-- Create netdata monitoring
                    user if it doesn't exist\nDO\n$do$\nBEGIN\n  IF NOT EXISTS (SELECT
                    FROM pg_roles WHERE rolname = 'netdata') THEN\n     CREATE USER
                    netdata WITH PASSWORD 'netdata_readonly_pass';\n  END IF;\nEND\n$do$;\n
                    \         \n-- Grant minimal privileges to netdata user\nGRANT
                    CONNECT ON DATABASE postgres TO netdata;\nGRANT USAGE ON SCHEMA
                    public TO netdata;\nGRANT SELECT ON ALL TABLES IN SCHEMA public
                    TO netdata;\n          \n-- Create vault management user if it
                    doesn't exist\nDO\n$do$\nBEGIN\n  IF NOT EXISTS (SELECT FROM pg_roles
                    WHERE rolname = 'vaultuser') THEN\n     CREATE USER vaultuser
                    WITH CREATEDB CREATEROLE LOGIN PASSWORD 'vaultpass';\n  END IF;\nEND\n$do$;\n"
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            -   ChangeMode: restart
                ChangeScript: null
                ChangeSignal: ''
                DestPath: local/create-db.sh
                EmbeddedTmpl: "#!/bin/sh\n          \n# Wait for PostgreSQL to be
                    ready\nuntil pg_isready -h 127.0.0.1 -p ${NOMAD_PORT_db} -U postgres;
                    do sleep 1; done\n          \n# First, create the user and database\npsql
                    -h 127.0.0.1 -p ${NOMAD_PORT_db} -U postgres -f /local/init.sql\n
                    \         \n# Check if database exists, create if not\nif ! psql
                    -h 127.0.0.1 -p ${NOMAD_PORT_db} -U postgres -lqt | cut -d \\|
                    -f 1 | grep -qw powerdns; then\n  echo \"Creating powerdns database...\"\n
                    \ createdb -h 127.0.0.1 -p ${NOMAD_PORT_db} -U postgres -O pdns
                    powerdns\nfi\n          \n# Apply the PowerDNS schema\npsql -h
                    127.0.0.1 -p ${NOMAD_PORT_db} -U postgres -d powerdns -f /local/powerdns-schema.sql\n
                    \         \n# Grant vaultuser permissions on PowerDNS database\necho
                    \"Granting vaultuser permissions on PowerDNS database...\"\npsql
                    -h 127.0.0.1 -p ${NOMAD_PORT_db} -U postgres -d powerdns -c \\\n
                    \ \"GRANT SELECT, INSERT, UPDATE, DELETE ON domains, records,
                    supermasters, comments, domainmetadata, cryptokeys, tsigkeys TO
                    vaultuser WITH GRANT OPTION; \n   GRANT SELECT, USAGE ON domains_id_seq,
                    records_id_seq, comments_id_seq, domainmetadata_id_seq, cryptokeys_id_seq,
                    tsigkeys_id_seq TO vaultuser WITH GRANT OPTION;\"\n          \necho
                    \"PowerDNS database initialization complete\"\n"
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            -   ChangeMode: restart
                ChangeScript: null
                ChangeSignal: ''
                DestPath: local/powerdns-schema.sql
                EmbeddedTmpl: "-- PowerDNS PostgreSQL schema\n-- Based on: https://doc.powerdns.com/authoritative/backends/generic-postgresql.html\n\n--
                    Main domains table\nCREATE TABLE IF NOT EXISTS domains (\n  id
                    \                   SERIAL PRIMARY KEY,\n  name                  VARCHAR(255)
                    NOT NULL,\n  master                VARCHAR(128) DEFAULT NULL,\n
                    \ last_check            INT DEFAULT NULL,\n  type                  VARCHAR(6)
                    NOT NULL,\n  notified_serial       INT DEFAULT NULL,\n  account
                    \              VARCHAR(40) DEFAULT NULL,\n  options               TEXT
                    DEFAULT NULL,\n  catalog               VARCHAR(255) DEFAULT NULL\n);\nCREATE
                    UNIQUE INDEX IF NOT EXISTS name_index ON domains(name);\n\n--
                    Records table\nCREATE TABLE IF NOT EXISTS records (\n  id                    BIGSERIAL
                    PRIMARY KEY,\n  domain_id             INT DEFAULT NULL,\n  name
                    \                 VARCHAR(255) DEFAULT NULL,\n  type                  VARCHAR(10)
                    DEFAULT NULL,\n  content               TEXT DEFAULT NULL,\n  ttl
                    \                  INT DEFAULT NULL,\n  prio                   INT
                    DEFAULT NULL,\n  change_date           INT DEFAULT NULL,\n  disabled
                    \             BOOL DEFAULT 'f',\n  ordername             VARCHAR(255),\n
                    \ auth                  BOOL DEFAULT 't',\n  CONSTRAINT domain_exists
                    \n    FOREIGN KEY(domain_id) REFERENCES domains(id) ON DELETE
                    CASCADE\n);\n\nCREATE INDEX IF NOT EXISTS records_name_index ON
                    records(name);\nCREATE INDEX IF NOT EXISTS nametype_index ON records(name,type);\nCREATE
                    INDEX IF NOT EXISTS domain_id ON records(domain_id);\nCREATE INDEX
                    IF NOT EXISTS recordorder ON records (domain_id, ordername text_pattern_ops);\n\n--
                    Supermasters table\nCREATE TABLE IF NOT EXISTS supermasters (\n
                    \ ip                    INET NOT NULL,\n  nameserver            VARCHAR(255)
                    NOT NULL,\n  account               VARCHAR(40) NOT NULL,\n  PRIMARY
                    KEY (ip, nameserver)\n);\n\n-- Comments table\nCREATE TABLE IF
                    NOT EXISTS comments (\n  id                    SERIAL PRIMARY
                    KEY,\n  domain_id             INT NOT NULL,\n  name                  VARCHAR(255)
                    NOT NULL,\n  type                  VARCHAR(10) NOT NULL,\n  modified_at
                    \          INT NOT NULL,\n  account               VARCHAR(40)
                    DEFAULT NULL,\n  comment               TEXT NOT NULL,\n  CONSTRAINT
                    domain_exists_comments\n    FOREIGN KEY(domain_id) REFERENCES
                    domains(id) ON DELETE CASCADE\n);\n\nCREATE INDEX IF NOT EXISTS
                    comments_name_type_idx ON comments (name, type);\nCREATE INDEX
                    IF NOT EXISTS comments_order_idx ON comments (domain_id, modified_at);\n\n--
                    Domain metadata table\nCREATE TABLE IF NOT EXISTS domainmetadata
                    (\n  id                    SERIAL PRIMARY KEY,\n  domain_id             INT
                    NOT NULL,\n  kind                  VARCHAR(32),\n  content               TEXT,\n
                    \ CONSTRAINT domain_exists_metadata\n    FOREIGN KEY(domain_id)
                    REFERENCES domains(id) ON DELETE CASCADE\n);\n\nCREATE INDEX IF
                    NOT EXISTS domainmetadata_idx ON domainmetadata (domain_id, kind);\n\n--
                    Cryptographic keys for DNSSEC\nCREATE TABLE IF NOT EXISTS cryptokeys
                    (\n  id                    SERIAL PRIMARY KEY,\n  domain_id             INT
                    NOT NULL,\n  flags                 INT NOT NULL,\n  active                BOOL,\n
                    \ published             BOOL DEFAULT TRUE,\n  content               TEXT,\n
                    \ CONSTRAINT domain_exists_cryptokeys\n    FOREIGN KEY(domain_id)
                    REFERENCES domains(id) ON DELETE CASCADE\n);\n\nCREATE INDEX IF
                    NOT EXISTS domainidindex ON cryptokeys(domain_id);\n\n-- TSIG
                    keys\nCREATE TABLE IF NOT EXISTS tsigkeys (\n  id                    SERIAL
                    PRIMARY KEY,\n  name                  VARCHAR(255),\n  algorithm
                    \            VARCHAR(50),\n  secret                VARCHAR(255)\n);\n\nCREATE
                    UNIQUE INDEX IF NOT EXISTS namealgoindex ON tsigkeys(name, algorithm);\n\n--
                    Grant permissions to PowerDNS user (pdns)\nGRANT ALL PRIVILEGES
                    ON ALL TABLES IN SCHEMA public TO pdns;\nGRANT ALL PRIVILEGES
                    ON ALL SEQUENCES IN SCHEMA public TO pdns;\nGRANT USAGE ON SCHEMA
                    public TO pdns;\n\n-- Set default privileges for future tables\nALTER
                    DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO pdns;\nALTER
                    DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO
                    pdns;\n"
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            User: ''
            Vault: null
            VolumeMounts: null
        Update:
            AutoPromote: false
            AutoRevert: false
            Canary: 0
            HealthCheck: checks
            HealthyDeadline: 300000000000
            MaxParallel: 1
            MinHealthyTime: 10000000000
            ProgressDeadline: 600000000000
            Stagger: 30000000000
        Volumes:
            postgres-data:
                AccessMode: ''
                AttachmentMode: ''
                MountOptions: null
                Name: postgres-data
                PerAlloc: false
                ReadOnly: false
                Source: postgres-data
                Sticky: false
                Type: host
    Type: service
    UI: null
    Update:
        AutoPromote: false
        AutoRevert: false
        Canary: 0
        HealthCheck: ''
        HealthyDeadline: 0
        MaxParallel: 1
        MinHealthyTime: 0
        ProgressDeadline: 0
        Stagger: 30000000000
    VaultNamespace: ''
    Version: 6
    VersionTag: null
-   Affinities: null
    AllAtOnce: false
    Constraints: null
    ConsulNamespace: ''
    CreateIndex: 171843
    Datacenters:
    - dc1
    DispatchIdempotencyToken: ''
    Dispatched: false
    ID: powerdns-auth
    JobModifyIndex: 188837
    Meta: null
    ModifyIndex: 188837
    Multiregion: null
    Name: powerdns-auth
    Namespace: default
    NodePool: default
    NomadTokenID: ''
    ParameterizedJob: null
    ParentID: ''
    Payload: null
    Periodic: null
    Priority: 50
    Region: global
    Spreads: null
    Stable: false
    Status: running
    StatusDescription: ''
    Stop: false
    SubmitTime: 1755727318463411812
    TaskGroups:
    -   Affinities: null
        Constraints:
        -   LTarget: ${attr.os.signals}
            Operand: set_contains
            RTarget: SIGHUP
        -   LTarget: ${attr.nomad.version}
            Operand: semver
            RTarget: '>= 1.7.0-a'
        Consul: null
        Count: 1
        Disconnect: null
        EphemeralDisk:
            Migrate: false
            SizeMB: 300
            Sticky: false
        MaxClientDisconnect: null
        Meta: null
        Migrate:
            HealthCheck: checks
            HealthyDeadline: 300000000000
            MaxParallel: 1
            MinHealthyTime: 10000000000
        Name: auth
        Networks:
        -   DynamicPorts:
            -   HostNetwork: default
                Label: api
            Mode: host
            ReservedPorts:
            -   HostNetwork: default
                Label: dns
                To: 53
                Value: 53
        PreventRescheduleOnLost: false
        ReschedulePolicy:
            Attempts: 0
            Delay: 30000000000
            DelayFunction: exponential
            Interval: 0
            MaxDelay: 3600000000000
            Unlimited: true
        RestartPolicy:
            Attempts: 3
            Delay: 10000000000
            Interval: 30000000000
            Mode: fail
            RenderTemplates: false
        Scaling: null
        Services: null
        ShutdownDelay: null
        Spreads: null
        StopAfterClientDisconnect: null
        Tasks:
        -   Actions: null
            Affinities: null
            Artifacts: null
            CSIPluginConfig: null
            Config:
                args:
                - --config-dir=/local
                cap_add:
                - NET_BIND_SERVICE
                image: powerdns/pdns-auth-46:latest
                network_mode: host
            Constraints:
            -   LTarget: ${attr.consul.version}
                Operand: semver
                RTarget: '>= 1.8.0'
            Consul: null
            DispatchPayload: null
            Driver: docker
            Env:
                BIND_ADDR: 0.0.0.0
            Identities: null
            Identity:
                Audience:
                - nomadproject.io
                ChangeMode: ''
                ChangeSignal: ''
                Env: false
                File: false
                Filepath: ''
                Name: default
                ServiceName: ''
                TTL: 0
            KillSignal: ''
            KillTimeout: 5000000000
            Kind: ''
            Leader: false
            Lifecycle: null
            LogConfig:
                Disabled: false
                MaxFileSizeMB: 10
                MaxFiles: 10
            Meta: null
            Name: pdns-auth
            Resources:
                CPU: 500
                Cores: 0
                Devices: null
                DiskMB: 0
                IOPS: 0
                MemoryMB: 512
                MemoryMaxMB: 0
                NUMA: null
                Networks: null
                SecretsMB: 0
            RestartPolicy:
                Attempts: 3
                Delay: 10000000000
                Interval: 30000000000
                Mode: fail
                RenderTemplates: false
            ScalingPolicies: null
            Schedule: null
            Services:
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 10000000000
                    Method: ''
                    Name: 'service: "powerdns-auth" check'
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: ''
                    PortLabel: dns
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: pdns-auth
                    Timeout: 2000000000
                    Type: tcp
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_pdns-auth-powerdns-auth-dns
                    ServiceName: powerdns-auth
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: powerdns-auth
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: dns
                Provider: consul
                TaggedAddresses: null
                Tags:
                - udp
                - tcp
                TaskName: pdns-auth
                Weights: null
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 30000000000
                    Method: ''
                    Name: 'service: "powerdns-api" check'
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: /api/v1/servers/localhost
                    PortLabel: api
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: pdns-auth
                    Timeout: 2000000000
                    Type: http
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_pdns-auth-powerdns-api-api
                    ServiceName: powerdns-api
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: powerdns-api
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: api
                Provider: consul
                TaggedAddresses: null
                Tags:
                - http
                - api
                TaskName: pdns-auth
                Weights: null
            ShutdownDelay: 0
            Templates:
            -   ChangeMode: signal
                ChangeScript: null
                ChangeSignal: SIGHUP
                DestPath: local/pdns.conf
                EmbeddedTmpl: 'launch=gpgsql

                    gpgsql-host={{ key "pdns/db/host" }}

                    gpgsql-port={{ key "pdns/db/port" }}

                    gpgsql-dbname={{ key "pdns/db/name" }}

                    gpgsql-user={{ key "pdns/db/user" }}

                    # Password passed as HCL2 variable from Infisical

                    gpgsql-password=

                    gpgsql-dnssec=yes

                    gpgsql-prepared-statements=yes


                    # Listen on DNS :53 (static) on host network

                    local-address={{ env "BIND_ADDR" }}

                    local-port=53

                    version-string=anonymous


                    # HTTP API (dynamic)

                    api=yes

                    # API key passed as HCL2 variable from Infisical

                    api-key=

                    webserver=yes

                    webserver-address=0.0.0.0

                    webserver-port={{ env "NOMAD_PORT_api" }}


                    # Security hygiene

                    disable-syslog=yes

                    loglevel=4

                    '
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            User: ''
            Vault: null
            VolumeMounts: null
        Update:
            AutoPromote: false
            AutoRevert: false
            Canary: 0
            HealthCheck: checks
            HealthyDeadline: 300000000000
            MaxParallel: 1
            MinHealthyTime: 10000000000
            ProgressDeadline: 600000000000
            Stagger: 30000000000
        Volumes: null
    Type: service
    UI: null
    Update:
        AutoPromote: false
        AutoRevert: false
        Canary: 0
        HealthCheck: ''
        HealthyDeadline: 0
        MaxParallel: 1
        MinHealthyTime: 0
        ProgressDeadline: 0
        Stagger: 30000000000
    VaultNamespace: ''
    Version: 2
    VersionTag: null
-   Affinities: null
    AllAtOnce: false
    Constraints: null
    ConsulNamespace: ''
    CreateIndex: 151481
    Datacenters:
    - dc1
    DispatchIdempotencyToken: ''
    Dispatched: false
    ID: traefik
    JobModifyIndex: 200118
    Meta: null
    ModifyIndex: 200118
    Multiregion: null
    Name: traefik
    Namespace: default
    NodePool: default
    NomadTokenID: ''
    ParameterizedJob: null
    ParentID: ''
    Payload: null
    Periodic: null
    Priority: 50
    Region: global
    Spreads: null
    Stable: false
    Status: running
    StatusDescription: ''
    Stop: false
    SubmitTime: 1755830245478989226
    TaskGroups:
    -   Affinities: null
        Constraints:
        -   LTarget: ${attr.nomad.version}
            Operand: semver
            RTarget: '>= 1.7.0-a'
        Consul: null
        Count: 1
        Disconnect: null
        EphemeralDisk:
            Migrate: false
            SizeMB: 300
            Sticky: false
        MaxClientDisconnect: null
        Meta: null
        Migrate:
            HealthCheck: checks
            HealthyDeadline: 300000000000
            MaxParallel: 1
            MinHealthyTime: 10000000000
        Name: traefik
        Networks:
        -   DynamicPorts:
            -   HostNetwork: default
                Label: admin
                To: 8080
            Mode: host
            ReservedPorts:
            -   HostNetwork: default
                Label: http
                Value: 80
            -   HostNetwork: default
                Label: https
                Value: 443
        PreventRescheduleOnLost: false
        ReschedulePolicy:
            Attempts: 0
            Delay: 30000000000
            DelayFunction: exponential
            Interval: 0
            MaxDelay: 3600000000000
            Unlimited: true
        RestartPolicy:
            Attempts: 2
            Delay: 15000000000
            Interval: 1800000000000
            Mode: fail
            RenderTemplates: false
        Scaling: null
        Services: null
        ShutdownDelay: null
        Spreads: null
        StopAfterClientDisconnect: null
        Tasks:
        -   Actions: null
            Affinities: null
            Artifacts: null
            CSIPluginConfig: null
            Config:
                image: traefik:v3.0
                ports:
                - http
                - https
                - admin
                volumes:
                - local/traefik.yml:/etc/traefik/traefik.yml
                - local/dynamic:/etc/traefik/dynamic
                - traefik-certs:/certs
            Constraints:
            -   LTarget: ${attr.consul.version}
                Operand: semver
                RTarget: '>= 1.8.0'
            Consul: null
            DispatchPayload: null
            Driver: docker
            Env:
                CONSUL_HTTP_ADDR: 127.0.0.1:8500
            Identities: null
            Identity:
                Audience:
                - nomadproject.io
                ChangeMode: ''
                ChangeSignal: ''
                Env: false
                File: false
                Filepath: ''
                Name: default
                ServiceName: ''
                TTL: 0
            KillSignal: ''
            KillTimeout: 5000000000
            Kind: ''
            Leader: false
            Lifecycle: null
            LogConfig:
                Disabled: false
                MaxFileSizeMB: 10
                MaxFiles: 10
            Meta: null
            Name: traefik
            Resources:
                CPU: 200
                Cores: 0
                Devices: null
                DiskMB: 0
                IOPS: 0
                MemoryMB: 256
                MemoryMaxMB: 0
                NUMA: null
                Networks: null
                SecretsMB: 0
            RestartPolicy:
                Attempts: 2
                Delay: 15000000000
                Interval: 1800000000000
                Mode: fail
                RenderTemplates: false
            ScalingPolicies: null
            Schedule: null
            Services:
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 10000000000
                    Method: ''
                    Name: traefik-api-ping
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: /ping
                    PortLabel: admin
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: traefik
                    Timeout: 2000000000
                    Type: http
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 30000000000
                    Method: ''
                    Name: traefik-dashboard
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: /dashboard/
                    PortLabel: admin
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: traefik
                    Timeout: 5000000000
                    Type: http
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_traefik-traefik-admin
                    ServiceName: traefik
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: traefik
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: admin
                Provider: consul
                TaggedAddresses: null
                Tags:
                - traefik.enable=true
                - traefik.http.routers.api.rule=Host(`traefik.spaceships.work`)
                - traefik.http.routers.api.service=api@internal
                - traefik.http.routers.api.entrypoints=websecure
                - traefik.http.routers.api.tls=true
                - prometheus
                - metrics
                TaskName: traefik
                Weights: null
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 10000000000
                    Method: ''
                    Name: http-entrypoint
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: ''
                    PortLabel: http
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: traefik
                    Timeout: 2000000000
                    Type: tcp
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_traefik-traefik-http-http
                    ServiceName: traefik-http
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: traefik-http
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: http
                Provider: consul
                TaggedAddresses: null
                Tags:
                - entrypoint
                - http
                TaskName: traefik
                Weights: null
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 10000000000
                    Method: ''
                    Name: https-entrypoint
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: ''
                    PortLabel: https
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: traefik
                    Timeout: 2000000000
                    Type: tcp
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_traefik-traefik-https-https
                    ServiceName: traefik-https
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: traefik-https
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: https
                Provider: consul
                TaggedAddresses: null
                Tags:
                - entrypoint
                - https
                - tls
                TaskName: traefik
                Weights: null
            -   Address: ''
                AddressMode: auto
                CanaryMeta: null
                CanaryTags: null
                Checks:
                -   AddressMode: ''
                    Args: null
                    Body: ''
                    CheckRestart: null
                    Command: ''
                    Expose: false
                    FailuresBeforeCritical: 0
                    FailuresBeforeWarning: 0
                    GRPCService: ''
                    GRPCUseTLS: false
                    Header: null
                    InitialStatus: ''
                    Interval: 30000000000
                    Method: ''
                    Name: prometheus-metrics
                    Notes: ''
                    OnUpdate: require_healthy
                    Path: /metrics
                    PortLabel: admin
                    Protocol: ''
                    SuccessBeforePassing: 0
                    TLSServerName: ''
                    TLSSkipVerify: false
                    TaskName: traefik
                    Timeout: 5000000000
                    Type: http
                Cluster: default
                Connect: null
                EnableTagOverride: false
                Identity:
                    Audience:
                    - consul.io
                    ChangeMode: ''
                    ChangeSignal: ''
                    Env: false
                    File: false
                    Filepath: ''
                    Name: consul-service_traefik-traefik-metrics-admin
                    ServiceName: traefik-metrics
                    TTL: 3600000000000
                Kind: ''
                Meta: null
                Name: traefik-metrics
                Namespace: default
                OnUpdate: require_healthy
                PortLabel: admin
                Provider: consul
                TaggedAddresses: null
                Tags:
                - prometheus
                - metrics
                - path:/metrics
                TaskName: traefik
                Weights: null
            ShutdownDelay: 0
            Templates:
            -   ChangeMode: restart
                ChangeScript: null
                ChangeSignal: ''
                DestPath: local/traefik.yml
                EmbeddedTmpl: "# Static configuration\napi:\n  dashboard: true\n  debug:
                    false\n\nentryPoints:\n  web:\n    address: \":80\"\n    http:\n
                    \     redirections:\n        entryPoint:\n          to: websecure\n
                    \         scheme: https\n          permanent: true\n\n  websecure:\n
                    \   address: \":443\"\n\n  admin:\n    address: \":8080\"\n\nproviders:\n
                    \ # File provider for static configs\n  file:\n    directory:
                    /etc/traefik/dynamic\n    watch: true\n\n  # Consul Catalog for
                    service discovery\n  consulCatalog:\n    endpoint:\n      address:
                    {{ if env \"CONSUL_HTTP_ADDR\" }}{{ env \"CONSUL_HTTP_ADDR\" }}{{
                    else }}consul.service.consul:8500{{ end }}\n      scheme: http\n
                    \   exposedByDefault: false\n    prefix: traefik\n    watch: true\n\n#
                    Enable Consul KV for dynamic config (optional)\n# providers:\n#
                    \  consul:\n#     endpoints:\n#       - \"consul.service.consul:8500\"\n#
                    \    prefix: traefik\n\nping:\n  entryPoint: admin\n\nlog:\n  level:
                    INFO\n\naccessLog: {}\n\nmetrics:\n  prometheus:\n    entryPoint:
                    admin\n    addEntryPointsLabels: true\n    addServicesLabels:
                    true\n"
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            -   ChangeMode: restart
                ChangeScript: null
                ChangeSignal: ''
                DestPath: local/dynamic/certs.yml
                EmbeddedTmpl: "tls:\n  stores:\n    default:\n      defaultGeneratedCert:\n
                    \       resolver: default\n        domain:\n          main: \"spaceships.work\"\n
                    \         sans:\n            - \"*.spaceships.work\"\n            -
                    \"*.doggos.spaceships.work\"\n            - \"*.service.consul\"\n"
                Envvars: false
                ErrMissingKey: false
                Gid: null
                LeftDelim: '{{'
                Once: false
                Perms: '0644'
                RightDelim: '}}'
                SourcePath: ''
                Splay: 5000000000
                Uid: null
                VaultGrace: 0
                Wait: null
            User: ''
            Vault: null
            VolumeMounts: null
        Update:
            AutoPromote: false
            AutoRevert: false
            Canary: 0
            HealthCheck: checks
            HealthyDeadline: 300000000000
            MaxParallel: 1
            MinHealthyTime: 10000000000
            ProgressDeadline: 600000000000
            Stagger: 30000000000
        Volumes:
            traefik-certs:
                AccessMode: ''
                AttachmentMode: ''
                MountOptions: null
                Name: traefik-certs
                PerAlloc: false
                ReadOnly: false
                Source: traefik-certs
                Sticky: false
                Type: host
    Type: service
    UI: null
    Update:
        AutoPromote: false
        AutoRevert: false
        Canary: 0
        HealthCheck: ''
        HealthyDeadline: 0
        MaxParallel: 1
        MinHealthyTime: 0
        ProgressDeadline: 0
        Stagger: 30000000000
    VaultNamespace: ''
    Version: 6
    VersionTag: null

```
