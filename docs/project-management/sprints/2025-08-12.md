# Sprint: August 12-20, 2025

**Sprint Focus**: Critical domain migration and PowerDNS deployment with PostgreSQL backend
**Status**: In Progress (Day 9 of 9)

---

## Navigation: [Task Summary](../task-summary.md) | [Current Sprint](../current-sprint.md) | [Phase 4](../phases/phase-4-dns-integration.md)

## üìä Sprint Progress Update (Aug 20)

### Completed PRs
- ‚úÖ **PR #71**: Added homelab_domain variable to group_vars
- ‚úÖ **PR #72**: Implemented Nomad HCL2 variables for domain migration
- ‚úÖ **PR #73**: Updated markdownlint-cli2 to v0.18.1
- ‚úÖ **PR #74**: Updated Python to v3.13.7
- ‚úÖ **PR #76**: Migrated NetBox DNS playbooks to use domain variables

### Critical Domain Migration Status
- **Foundation**: ‚úÖ Complete (homelab_domain variable)
- **Nomad Jobs**: ‚úÖ Complete (HCL2 variables)
- **NetBox DNS**: ‚úÖ Complete (playbooks migrated)
- **PowerDNS**: üîÑ In Progress (deployment pending)
- **Lint Rules**: ‚è≥ Pending

## üéØ Sprint Goals

1. **CRITICAL**: Complete domain migration from .local to spaceships.work (prevent macOS DNS failures)
2. Deploy PowerDNS with PostgreSQL backend (Mode A architecture)
3. Configure NetBox DNS zones with new domain
4. Establish PowerDNS-NetBox connectivity

## üìä Sprint Metrics

- **Total Sprint Tasks**: 16
- **Critical Priority**: 6 (domain migration)
- **High Priority**: 10 (PowerDNS deployment)
- **Story Points**: ~34 (estimated)
- **Team Capacity**: 40 hours

## üìÖ Daily Breakdown

### Monday, August 12

#### Morning (Critical Path)

- [x] ~~[#19](https://github.com/basher83/netbox-ansible/issues/19): Create `homelab_domain` variable~~ ‚úÖ Completed in PR #71
  - Add to group_vars/all
  - Update role defaults
  - Test variable substitution

#### Afternoon (PowerDNS)

- [ ] [#28](https://github.com/basher83/netbox-ansible/issues/28): Deploy PowerDNS with PostgreSQL backend
  - Update nomad-jobs/platform-services/powerdns.nomad.hcl
  - Configure for PostgreSQL connection
  - Verify job deployment

### Tuesday, August 13

#### Morning (Infrastructure)

- [ ] [#29](https://github.com/basher83/netbox-ansible/issues/29): Expose DNS :53 and API ports
  - Configure static port 53 for DNS
  - Dynamic port for API
  - Test connectivity

#### Afternoon (Service Discovery)

- [ ] [#30](https://github.com/basher83/netbox-ansible/issues/30): Register Consul services
  - Register powerdns-auth service
  - Register powerdns-auth-api service
  - Verify in Consul catalog

### Wednesday, August 14

#### Morning (Critical Path)

- [ ] [#20](https://github.com/basher83/netbox-ansible/issues/20): Update Consul configuration
  - Remove .local references
  - Ensure .consul domain for service discovery
  - Test service resolution

#### Afternoon (Infrastructure)

- [ ] [#31](https://github.com/basher83/netbox-ansible/issues/31): Configure Traefik routing
  - Add router for PowerDNS API
  - Configure middleware
  - Test API access via Traefik

### Thursday, August 15

#### Morning (Health & Monitoring)

- [ ] [#32](https://github.com/basher83/netbox-ansible/issues/32): Add health checks
  - TCP/UDP checks for :53
  - HTTP health for API
  - Verify in Nomad/Consul UI

#### Afternoon (Critical Path)

- [ ] [#21](https://github.com/basher83/netbox-ansible/issues/21): Begin NetBox zone migration
  - Create spaceships.work zones
  - Start record migration
  - Validate zone structure

### Friday, August 16

#### Morning (NetBox Configuration)

- [ ] [#38](https://github.com/basher83/netbox-ansible/issues/38): Configure forward/reverse zones
  - Complete zone creation in NetBox
  - Set SOA/NS records
  - Configure TTLs per standard

#### Afternoon (Integration)

- [ ] [#39](https://github.com/basher83/netbox-ansible/issues/39): PowerDNS ‚Üê‚Üí NetBox connectivity
  - Configure API authentication
  - Test connectivity
  - Verify data flow

### Monday, August 19

#### Morning (Critical Path Completion)

- [x] ~~[#22](https://github.com/basher83/netbox-ansible/issues/22): Update all host rules~~ ‚úÖ Completed in PR #72
  - Update Nomad job files (HCL2 variables)
  - Fix Traefik host rules
  - Update TLS SANs

#### Afternoon (Documentation & Prevention)

- [x] ~~[#23](https://github.com/basher83/netbox-ansible/issues/23): Update documentation~~ ‚úÖ Completed in PR #76
  - Replace .local references
  - Add migration notes
  - Update examples

- [ ] [#24](https://github.com/basher83/netbox-ansible/issues/24): Add lint rule (Pending)
  - Create CI check
  - Document exceptions
  - Test PR validation

## ‚ö†Ô∏è Risks & Mitigation

### Critical Risks

1. **DNS Outage During Migration**
   - Mitigation: Keep Pi-hole as fallback
   - Test each change incrementally
   - Have rollback plan ready

2. **macOS Developer Impact**
   - Mitigation: Communicate changes early
   - Provide cache clearing instructions
   - Test on macOS before full cutover

3. **Service Discovery Disruption**
   - Mitigation: Consul .consul domain unchanged
   - Test service resolution after each change
   - Monitor Consul health checks

## ‚úÖ Definition of Done

### Domain Migration

- [ ] No .local references in active code
- [ ] All services resolve via spaceships.work
- [ ] macOS clients working properly
- [ ] Lint rules preventing regression

### PowerDNS Deployment

- [ ] PowerDNS running with PostgreSQL backend
- [ ] DNS queries responding on :53
- [ ] API accessible via Traefik
- [ ] Health checks passing
- [ ] Consul services registered

### NetBox Integration

- [ ] Zones configured with spaceships.work
- [ ] API connectivity established
- [ ] Forward/reverse zones working
- [ ] Records migrated from Pi-hole

## üîÑ Daily Standup Topics

1. Domain migration progress & blockers
2. PowerDNS deployment status
3. NetBox zone configuration updates
4. Testing results & issues found
5. Documentation updates needed

## üìù Sprint Retrospective Topics

- Domain migration lessons learned
- PowerDNS deployment challenges
- NetBox integration complexity
- Time estimates accuracy
- Process improvements needed

## üîó Quick Links

- [GitHub Milestone](https://github.com/basher83/netbox-ansible/milestone/2)
- [Critical Domain Migration](./critical-domain-migration.md)
- [Phase 4: DNS Integration](./phases/phase-4-dns-integration.md)
- [PowerDNS Implementation](../implementation/powerdns/README.md)
- [NetBox DNS Plugin Docs](../implementation/dns-ipam/netbox-integration-patterns.md)

## üìä Success Metrics

- Zero .local references remaining
- 100% service availability during migration
- PowerDNS response time < 10ms
- All health checks green
- No macOS DNS resolution issues
